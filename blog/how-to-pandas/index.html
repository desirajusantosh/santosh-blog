<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=description content="Santosh Desiraju's web site"><title>How to - Pandas - Santosh Desiraju</title><meta property="og:title" content="How to - Pandas - Santosh Desiraju"><meta property="og:type" content="website"><meta property="og:description" content="Santosh Desiraju's web site"><meta property="og:url" content="https://desirajusantosh.github.io/santosh-blog/blog/how-to-pandas/"><meta property="og:site_name" content="Santosh Desiraju"><meta property="og:image" content="https://desirajusantosh.github.io/santosh-blog/home/profile.jpg"><meta property="og:image" content="https://desirajusantosh.github.io/santosh-blog/home/yosemite_lakes_park.jpeg"><link rel="shortcut icon" href=https://desirajusantosh.github.io/santosh-blog/img/fav.ico><link rel=stylesheet href=https://desirajusantosh.github.io/santosh-blog/css/main.min.e8b9e0f1087106039d062b1cfebe25223599e387620ef454f6f4755b451d8742.css integrity="sha256-6Lng8QhxBgOdBisc/r4lIjWZ44diDvRU9vR1W0Udh0I=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin=anonymous referrerpolicy=no-referrer><style>.fa.fa-arrow-up:before{content:"\f077";font-family:"font awesome 5 free"!important;font-weight:900}</style></head><body><section id=top class=section><div class="container hero"><h1 class="bold-title is-1">Blog</h1></div><div class=section><div class=container><hr><nav class=navbar role=navigation aria-label="main navigation"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a><div class=navbar-menu id=navMenu><a class=navbar-item href=https://desirajusantosh.github.io/santosh-blog/>main</a>
<a class=navbar-item href=https://desirajusantosh.github.io/santosh-blog/#about>About</a>
<a class=navbar-item href=https://desirajusantosh.github.io/santosh-blog/projects/>Musing</a>
<a class=navbar-item href=https://desirajusantosh.github.io/santosh-blog/blog/>Back to Blog</a>
<a class=navbar-item href=https://desirajusantosh.github.io/santosh-blog/#contact>Contact</a></div></nav><hr></div><div class=container><h2 class="title is-1 top-pad strong-post-title"><a href=https://desirajusantosh.github.io/santosh-blog/blog/how-to-pandas/>How to - Pandas</a></h2><div class=post-data>Dec 19, 2022 |
2 minutes read</div><div class=blog-share>Share this:
<a class=twitter-share-button href="https://twitter.com/intent/tweet?text=How%20to%20-%20Pandas%20https%3a%2f%2fdesirajusantosh.github.io%2fsantosh-blog%2fblog%2fhow-to-pandas%2f" onclick='return window.open(this.href,"twitter-share","width=550,height=235"),!1'><i class="fab fa-twitter"></i>
<span class=hidden>Twitter</span></a>
<a class=icon-facebook href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fdesirajusantosh.github.io%2fsantosh-blog%2fblog%2fhow-to-pandas%2f" onclick='return window.open(this.href,"facebook-share","width=580,height=296"),!1'><i class="fab fa-facebook-f"></i>
<span class=hidden>Facebook</span></a>
<a class=icon-pinterest href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fdesirajusantosh.github.io%2fsantosh-blog%2fblog%2fhow-to-pandas%2f&amp;description=How%20to%20-%20Pandas" onclick='return window.open(this.href,"pinterest-share","width=580,height=296"),!1'><i class="fab fa-pinterest-p"></i>
<span class=hidden>Pinterest</span></a></div><p>Tags:
<a href=https://desirajusantosh.github.io/santosh-blog/tags/blog>blog</a>,
<a href=https://desirajusantosh.github.io/santosh-blog/tags/howto>howto</a></p></div><div class="container markdown top-pad"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pandas <span style=color:#66d9ef>as</span> pd
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Displaying complete dataframe</span>
</span></span><span style=display:flex><span>pd<span style=color:#f92672>.</span>set_option(<span style=color:#e6db74>&#34;display.max_rows&#34;</span>, <span style=color:#66d9ef>None</span>, <span style=color:#e6db74>&#34;display.max_columns&#34;</span>, <span style=color:#66d9ef>None</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>#pd.set_option(&#39;display.max_colwidth&#39;, None)  </span>
</span></span><span style=display:flex><span>pd<span style=color:#f92672>.</span>set_option(<span style=color:#e6db74>&#39;display.max_colwidth&#39;</span>, <span style=color:#ae81ff>199</span>)  
</span></span><span style=display:flex><span>pd<span style=color:#f92672>.</span>set_option(<span style=color:#e6db74>&#39;display.height&#39;</span>,<span style=color:#ae81ff>1000</span>)
</span></span><span style=display:flex><span>pd<span style=color:#f92672>.</span>set_option(<span style=color:#e6db74>&#39;display.max_rows&#39;</span>,<span style=color:#ae81ff>500</span>)
</span></span><span style=display:flex><span>pd<span style=color:#f92672>.</span>set_option(<span style=color:#e6db74>&#39;display.max_columns&#39;</span>,<span style=color:#ae81ff>500</span>)
</span></span><span style=display:flex><span>pd<span style=color:#f92672>.</span>set_option(<span style=color:#e6db74>&#39;display.width&#39;</span>,<span style=color:#ae81ff>1000</span>)
</span></span><span style=display:flex><span>pd<span style=color:#f92672>.</span>set_option(<span style=color:#e6db74>&#39;display.max_columns&#39;</span>, <span style=color:#66d9ef>None</span>)  <span style=color:#75715e># or 1000</span>
</span></span><span style=display:flex><span>pd<span style=color:#f92672>.</span>set_option(<span style=color:#e6db74>&#39;display.max_rows&#39;</span>, <span style=color:#66d9ef>None</span>)  <span style=color:#75715e># or 1000</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#pd.set_option(&#39;display.max_colwidth&#39;, None)  # or 199</span>
</span></span><span style=display:flex><span>pd<span style=color:#f92672>.</span>set_option(<span style=color:#e6db74>&#39;display.max_colwidth&#39;</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fh <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/path/to/file.csv&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Reading csv file</span>
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>read_csv(fh)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>read_csv(fh,header<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>read_csv(fh,header<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>,sep<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;\s+&#39;</span>,engine<span style=color:#f92672>=</span>python,index_col<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>read_csv(fh,header<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>,sep<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;\s+&#39;</span>,engine<span style=color:#f92672>=</span>python,index_col<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>, names<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;name&#39;</span>,<span style=color:#e6db74>&#39;id&#39;</span>,<span style=color:#e6db74>&#39;start&#39;</span>,<span style=color:#e6db74>&#39;end&#39;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Working with index</span>
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>set_index(<span style=color:#e6db74>&#39;name&#39;</span>,inplace<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>set_index(<span style=color:#e6db74>&#39;name&#39;</span>,drop<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>reset_index()
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>reset_index(drop<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span><span style=color:#75715e># Searching becomes easy with indexing</span>
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>loc[<span style=color:#ae81ff>50</span>]
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>loc[df[<span style=color:#e6db74>&#39;start&#39;</span>]<span style=color:#f92672>.</span>str<span style=color:#f92672>.</span>endswith(<span style=color:#e6db74>&#34;999&#34;</span>)]
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>loc[df[<span style=color:#e6db74>&#39;name&#39;</span>]<span style=color:#f92672>.</span>isin<span style=color:#f92672>.</span>([<span style=color:#e6db74>&#39;alex&#39;</span>,<span style=color:#e6db74>&#39;jim&#39;</span>])]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## High level info and stats</span>
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>info()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#rows and columsn</span>
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>shape
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#number of elements</span>
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>size
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#number of rows</span>
</span></span><span style=display:flex><span>len(df)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#include, exclude - object, float</span>
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>describe()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Working with NaN</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Drop all rows with NaN value in a dataframe</span>
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>dropna()
</span></span><span style=display:flex><span>df[df<span style=color:#f92672>.</span>notnull()<span style=color:#f92672>.</span>all(<span style=color:#ae81ff>1</span>)]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#axis=0:row, axis=1:column, subset</span>
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>dropna(how<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;all&#39;</span>,axis<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>dropna(subset<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;name&#34;</span>,<span style=color:#e6db74>&#34;id&#34;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Dropping NaN rows specific column</span>
</span></span><span style=display:flex><span>df[df[<span style=color:#e6db74>&#39;start&#39;</span>]<span style=color:#f92672>.</span>notna()]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Dropping columns</span>
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> df<span style=color:#f92672>.</span>drop(<span style=color:#e6db74>&#39;id&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>#or</span>
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>drop(<span style=color:#e6db74>&#39;id&#39;</span>,inplace<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Combining dataframes</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Default value of ignore_index is False</span>
</span></span><span style=display:flex><span>df3 <span style=color:#f92672>=</span> df1<span style=color:#f92672>.</span>append(df2,ignore_index<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Inserting column</span>
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> df<span style=color:#f92672>.</span>assign(new_col_name<span style=color:#f92672>=</span>[<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>7</span>,<span style=color:#ae81ff>4</span>])
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> df<span style=color:#f92672>.</span>insert(<span style=color:#ae81ff>3</span>,<span style=color:#e6db74>&#39;new_col_name&#39;</span>,[<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>7</span>,<span style=color:#ae81ff>4</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Lambda </span>
</span></span><span style=display:flex><span><span style=color:#75715e>#lambda x: x.points / 2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Renaming column</span>
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>rename({<span style=color:#e6db74>&#39;name&#39;</span>:<span style=color:#e6db74>&#39;NAME&#39;</span>})
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>rename(columns <span style=color:#f92672>=</span> str<span style=color:#f92672>.</span>upper)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>columns <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;NAME&#39;</span>,<span style=color:#e6db74>&#39;START&#39;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## String operations</span>
</span></span><span style=display:flex><span>regex <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;J.*&#39;</span>
</span></span><span style=display:flex><span>df[df<span style=color:#f92672>.</span>name<span style=color:#f92672>.</span>str<span style=color:#f92672>.</span><span style=color:#66d9ef>match</span>(regex)]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Comprehensions for performing multiple string operations</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Accessing</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Accessing entire row - returns series</span>
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>iloc[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span><span style=color:#75715e>#Accessing value </span>
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>iat[<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span><span style=color:#75715e>#Accessing value by converting to numpy array</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>df[<span style=color:#e6db74>&#39;name&#39;</span>]<span style=color:#f92672>.</span>tolist()
</span></span><span style=display:flex><span>df[<span style=color:#e6db74>&#39;name&#39;</span>]<span style=color:#f92672>.</span>values<span style=color:#f92672>.</span>tolist()
</span></span><span style=display:flex><span>list(df[<span style=color:#e6db74>&#39;name&#39;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Adding to a dataframe</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Append a list</span>
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> df<span style=color:#f92672>.</span>append([list1])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Concat 2 dataframes</span>
</span></span><span style=display:flex><span>df_new <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>concat([df1,df2])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Groupby</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Printing grouped df</span>
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>groupby(<span style=color:#e6db74>&#39;A&#39;</span>)<span style=color:#f92672>.</span>apply(print)
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>groupby(by)<span style=color:#f92672>.</span>apply(<span style=color:#66d9ef>lambda</span> a: a[:])
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>groupby(by)<span style=color:#f92672>.</span>apply(<span style=color:#66d9ef>lambda</span> a: a<span style=color:#f92672>.</span>drop(by, axis<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>)[:])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(df<span style=color:#f92672>.</span>groupby(<span style=color:#e6db74>&#34;Groups&#34;</span>, as_index<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>)
</span></span><span style=display:flex><span>           <span style=color:#f92672>.</span>agg({<span style=color:#e6db74>&#34;Date&#34;</span>:<span style=color:#e6db74>&#34;first&#34;</span>, <span style=color:#e6db74>&#34;data1&#34;</span>:<span style=color:#e6db74>&#34;sum&#34;</span>, <span style=color:#e6db74>&#34;data2&#34;</span>:<span style=color:#e6db74>&#34;sum&#34;</span>}))
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>5</span>]:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Reference:
</span></span><span style=display:flex><span>https:<span style=color:#f92672>//</span>sparkbyexamples<span style=color:#f92672>.</span>com<span style=color:#f92672>/</span>pandas<span style=color:#f92672>/</span>pandas<span style=color:#f92672>-</span>groupby<span style=color:#f92672>-</span>sum<span style=color:#f92672>-</span>examples<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>https:<span style=color:#f92672>//</span>realpython<span style=color:#f92672>.</span>com<span style=color:#f92672>/</span>pandas<span style=color:#f92672>-</span>groupby<span style=color:#f92672>/</span>
</span></span></code></pre></div></div><div class=container><hr></div><div class="container has-text-centered top-pad"><a href=#top><i class="fa fa-arrow-up"></i></a></div><div class=container><hr></div><div class=section id=footer><div class="container has-text-centered"><span class=footer-text><pre><code>[**Introduction**](https://github.com/victoriadrake/hugo-theme-introduction/) theme for [Hugo](http://gohugo.io/) - Made with &lt;i class=&quot;far fa-heart&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; and &lt;i class=&quot;fas fa-coffee&quot;&gt;&lt;/i&gt; by open source contributors. [Netlify](https://www.netlify.com/) used to build and host this site, now its gh pages
</code></pre></span></div></div></div></section><script src=https://desirajusantosh.github.io/santosh-blog/js/bundle.63395fd8ba44a8270baa38f6dd56cd604eb595aea77bcedf619062ed9c0abb3e.js integrity="sha256-Yzlf2LpEqCcLqjj23VbNYE61la6ne87fYZBi7ZwKuz4="></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-152PCJSKRY","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>